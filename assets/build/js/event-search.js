/*! For license information please see event-search.js.LICENSE.txt */
(()=>{function e(){var t,n,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",c=o.toStringTag||"@@toStringTag";function i(e,o,a,c){var i=o&&o.prototype instanceof s?o:s,f=Object.create(i.prototype);return r(f,"_invoke",function(e,r,o){var a,c,i,s=0,f=o||[],p=!1,l={p:0,n:0,v:t,a:v,f:v.bind(t,4),d:function(e,r){return a=e,c=0,i=t,l.n=r,u}};function v(e,r){for(c=e,i=r,n=0;!p&&s&&!o&&n<f.length;n++){var o,a=f[n],v=l.p,d=a[2];e>3?(o=d===r)&&(i=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=t):a[0]<=v&&((o=e<2&&v<a[1])?(c=0,l.v=r,l.n=a[1]):v<d&&(o=e<3||a[0]>r||r>d)&&(a[4]=e,a[5]=r,l.n=d,c=0))}if(o||e>1)return u;throw p=!0,r}return function(o,f,d){if(s>1)throw TypeError("Generator is already running");for(p&&1===f&&v(f,d),c=f,i=d;(n=c<2?t:i)||!p;){a||(c?c<3?(c>1&&(l.n=-1),v(c,i)):l.n=i:l.v=i);try{if(s=2,a){if(c||(o="next"),n=a[o]){if(!(n=n.call(a,i)))throw TypeError("iterator result is not an object");if(!n.done)return n;i=n.value,c<2&&(c=0)}else 1===c&&(n=a.return)&&n.call(a),c<2&&(i=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=t}else if((n=(p=l.n<0)?i:e.call(r,l))!==u)break}catch(e){a=t,c=1,i=e}finally{s=1}}return{value:n,done:p}}}(e,a,c),!0),f}var u={};function s(){}function f(){}function p(){}n=Object.getPrototypeOf;var l=[][a]?n(n([][a]())):(r(n={},a,function(){return this}),n),v=p.prototype=s.prototype=Object.create(l);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,r(e,c,"GeneratorFunction")),e.prototype=Object.create(v),e}return f.prototype=p,r(v,"constructor",p),r(p,"constructor",f),f.displayName="GeneratorFunction",r(p,c,"GeneratorFunction"),r(v),r(v,c,"Generator"),r(v,a,function(){return this}),r(v,"toString",function(){return"[object Generator]"}),(e=function(){return{w:i,m:d}})()}function r(e,t,n,o){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}r=function(e,t,n,o){function c(t,n){r(e,t,function(e){return this._invoke(t,n,e)})}t?a?a(e,t,{value:n,enumerable:!o,configurable:!o,writable:!o}):e[t]=n:(c("next",0),c("throw",1),c("return",2))},r(e,t,n,o)}function t(e,r,t,n,o,a,c){try{var i=e[a](c),u=i.value}catch(e){return void t(e)}i.done?r(u):Promise.resolve(u).then(n,o)}document.addEventListener("DOMContentLoaded",function(){var r=document.querySelectorAll("[data-em-search]");r.length&&"undefined"!=typeof EM_AJAX&&r.forEach(function(r){var n=r.querySelector(".em-event-search-form"),o=r.querySelector(".em-event-search-results");if(n&&o){var a=function(e){o.innerHTML=e||"<p>No results.</p>"};n.addEventListener("submit",function(){var r,o=(r=e().m(function r(t){var o,c,i,u,s,f,p;return e().w(function(e){for(;;)switch(e.p=e.n){case 0:return t.preventDefault(),o=new FormData(n),c=new URLSearchParams({action:"em_search_events",nonce:EM_AJAX.nonce,city:String(o.get("city")||""),date_from:String(o.get("date_from")||""),date_to:String(o.get("date_to")||"")}),e.p=1,e.n=2,fetch(EM_AJAX.ajax_url,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},body:c.toString()});case 2:if((u=e.v).ok){e.n=3;break}return a('<p class="em-message error">Request failed.</p>'),e.a(2);case 3:return e.p=3,e.n=4,u.json();case 4:s=e.v,e.n=6;break;case 5:return e.p=5,e.v,a('<p class="em-message error">Unexpected server response.</p>'),e.a(2);case 6:if(s.success){e.n=7;break}return a('<p class="em-message error">'.concat((null===(f=s.data)||void 0===f?void 0:f.message)||"Search error.","</p>")),e.a(2);case 7:a((null===(i=s.data)||void 0===i?void 0:i.html)||"<p>No results.</p>"),e.n=9;break;case 8:e.p=8,p=e.v,console.error(p),a('<p class="em-message error">Server error.</p>');case 9:return e.a(2)}},r,null,[[3,5],[1,8]])}),function(){var e=this,n=arguments;return new Promise(function(o,a){var c=r.apply(e,n);function i(e){t(c,o,a,i,u,"next",e)}function u(e){t(c,o,a,i,u,"throw",e)}i(void 0)})});return function(e){return o.apply(this,arguments)}}())}})})})();